<!DOCTYPE html>
<!-- saved from url=(0029)#/cosmo/ -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <title>BiNGO-3C online web-server </title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="./assets/bootstrap.css">
    <link rel="stylesheet" href="./assets/custom.min.css">
    <script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
  <body style="">

    <!--  -->
    <!--  -->
    <!--  -->
    <!--  -->
    <div class="navbar navbar-expand-lg fixed-top navbar-dark bg-primary">
      <div class="container">
        <a href="#/" class="navbar-brand">BiNGO-3C</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" href="#">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Publications</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">About us</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Contact</a>
            </li>
            
          </ul>
          <ul class="navbar-nav ms-md-auto">
            <li class="nav-item">
              <a target="_blank" rel="noopener" class="nav-link" href="https://github.com/mouneem/"><i class="bi bi-github"></i> GitHub</a>
            </li>
          </ul>
        </div>
      </div>
    </div>

  <!-- header -->
    <div class="container p-5">
      <div class="row text-center">
        <div class="col-6">
          <h2>Example body text</h2>
          <p>An abbreviation of the word attribute</p>
        </div>
        <div class="col-6">
          <h2>Example body text</h2>
          <p>An abbreviation of the word attribute</p>
        </div>
      </div>
    </div>


    <!--  -->
    <!--  -->
    <!--  -->
<hr>
    <div class="container ">
      <form>
        <fieldset>
          <legend> Pairwise Comparison</legend>
          <p>Please entre the two sequences to be copmared than click on submit</p>
          
          <div class="row">
            <div class="col-6">
              <div class="form-group">
                <label for="exampleTextarea" class="form-label mt-4">Sequence 1 (without header) </label>
                <textarea id="sequence1" class="form-control" id="exampleTextarea" rows="3" maxlength="1000">GATCGATCGCTAGCTGATAAAAAAAACGTGATCGTCGATCGTAGCTGACTGACTG</textarea>
              </div>
            </div>
            <div class="col-6">
              <div class="form-group">
                <label for="exampleTextarea" class="form-label mt-4">Sequence 2 (without header)</label>
                <textarea id="sequence2" class="form-control" id="exampleTextarea" rows="3"  maxlength="1000">GATCGATCGCTAGCTGATCGTGATCGTCGACCCCCCCTCGTAGCTGACTGACTG</textarea>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-6">
              <div class="form-group">
                <label for="exampleTextarea" class="form-label mt-4">Words size: (>3) </label>
                <input type="number" class="form-control" id="s_val"  value="11" id="inputDefault">
              </div>
            </div>
            <div class="col-6">
              <div class="form-group">
                <label for="exampleTextarea"  class="form-label mt-4">gap size: (>0) </label>
                <input type="number" class="form-control" id="h_val" value="5" id="inputDefault">
              </div>
            </div>
          </div>
          <!-- <div class="row">
            <div class="col-4">
              <div class="form-group">
                <label for="exampleTextarea" class="form-label mt-4"></label>
                <label for="exampleTextarea" class="form-label mt-4">Delimiter: </label>
                <div class="form-check form-switch">
                  <input class="form-check-input" onclick="hideDelim()" type="checkbox" id="flexSwitchCheckChecked" checked="">
                  <label class="form-check-label" for="flexSwitchCheckChecked">Use a random delimiter </label>
                </div>
              </div>
              <div class="form-group" id="delimiter_block">
                <label for="exampleTextarea" class="form-label mt-4">Delimiter size: </label>
                <input type="number" class="form-control" value="1" id="inputDefault">
              </div>
            </div>
          </div> -->

          <div class="p-3">
            <button type="submit" id="submit" class="btn btn-primary">Compare two sequences</button>
          </div>
        </fieldset>
      </form>
    </div>


    <div class=" bg-white" style="display: none;" id="results">
      <div class="container ">
        <div class="col-12 text-center text-white p-5">
          <div class="alert alert-dismissible alert-primary ">
            <h2>Comparison results :</h2>
            <table class="table">
              <td>
                <th>Sequence length</th>
                <th>Number of words</th>
                <th>Size before encoding</th>
                <th>Size after numeric encoding</th>
              </td>
              <tr>
                <th>sequence 1</th>
                <td > <span id="s1_len"></span> </td>
                <td> <span id="s1_nw"></span> </td>
                <td> <span id="s1_sb"></span> bits </td>
                <td> <span id="s1_sa"></span> bits </td>
              </tr>
              <tr>
                <th>sequence 2</th>
                <td > <span id="s2_len"></span> </td>
                <td> <span id="s2_nw"></span> </td>
                <td> <span id="s2_sb"></span> bits </td>
                <td> <span id="s2_sa"></span> bits </td>
              </tr>
            </table>
            <hr>

            <table class="table">
              <td>
                <th>Number of Common Words</th>
                <th>Similarity Score</th>
              </td>
              <tr>
                <td></td>
                <td> <span class="display-4" id="cm_wd"></span></td>
                <td> <span class="display-4" id="sm_sc"></span> % </td>
              </tr>
            </table>

          </div>
        </div>
      </div>
    </div> 

    <!--  -->
    <!--  -->
    <!--  -->
    <!--  -->
    <div class=" bg-primary">
      <div class="container">
        <div class="col-12 text-center text-white p-3">
          Hi
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
          <br>
        </div>
      </div>
    </div> 


  <footer id="footer">
    <div class="container text-center">
      Developed by AbdelMounim ESSABBAR et al 2022 <a href="http://medbiotech-lab.ma">@Medbiotech-lab | Mohammed 5 University of Rabat</a> in collaboration with  <a href="http://um6ss.ma">Centre Mohammed VI de la Recherche et de l'Innovation</a>
    </div>
  </footer>

  <script>
    function hideDelim() {
      var x = document.getElementById("delimiter_block");
      if (x.style.display === "none") {
        x.style.display = "block";
      } else {
        x.style.display = "none";
      }
    }

  </script>


<script type="text/javascript">
  $(document).ready(function() {
      var sequence1 = $('#sequence1');
      var sequence2 = $('#sequence2');
      var s_val = $('#s_val');
      var h_val = $('#h_val');
      var submit = $('#submit');

      submit.click(function() {
        // load data
        var sequence1 = $('#sequence1');
        var sequence2 = $('#sequence2');
        var s_val = $('#s_val');
        var h_val = $('#h_val');
        var submit = $('#submit');

        // convert
        var s  =parseInt(s_val.val());
        var h  =parseInt(h_val.val());
        
        // processing
        var seq1 = sequence1.val()
        var words1 = splitSeq(seq1, s, h);
        var bins1 = binarize(words1);
        
        var seq2 = sequence2.val()
        var words2 = splitSeq(seq2, s, h);
        var bins2 = binarize(words2);

        console.log(seq1.length * 8  )
        console.log(bins1.length * 8  )


        var s1_len = document.getElementById("s1_len");
        s1_len.innerHTML = seq1.length ;
        var s1_nw = document.getElementById("s1_nw");
        s1_nw.innerHTML = words1.length ;
        var s1_sb = document.getElementById("s1_sb");
        s1_sb.innerHTML = seq1.length*8 ;
        var s1_sa = document.getElementById("s1_sa");
        s1_sa.innerHTML = bins2.length * 8 ;


        var s2_len = document.getElementById("s2_len");
        s2_len.innerHTML = seq1.length ;
        var s2_len = document.getElementById("s2_nw");
        s2_nw.innerHTML = words2.length ;
        var s2_sb = document.getElementById("s2_sb");
        s2_sb.innerHTML = seq2.length * 8 ;
        var s2_sa = document.getElementById("s2_sa");
        s2_sa.innerHTML = bins2.length * 8 ;


        var cm = intersect(bins1,bins2);
        var cm_wd = document.getElementById("cm_wd");
        cm_wd.innerHTML = cm.length ;
        var U = [...new Set([...bins2, ...bins1])] 
        var sm_sc = document.getElementById("sm_sc");
        sm_sc.innerHTML = (cm.length/U.length).toFixed(5)*100 ;
        // console.log(bins1);


        var x = document.getElementById("results");
          x.style.display = "block";
      });
  });

  
  function splitSeq(seq, s, h) {
    var words = [];
    for (let index = 0; index < seq.length - s; index = index+h) {
      let word = seq.substring(index, index+s);
      words.push(word);
    }
    return words;
  }

  function binarize(words) {
    let bins = [];
    for (let index = 0; index < words.length; index++) {
      let word = words[index];
      word = word.replaceAll('A','00').replaceAll('C','01').replaceAll('G','10').replaceAll('T','11');
      bins.push(word);
    }
    return bins;
    
  }

  function intersect(l1, l2){
    const filteredArray = l1.filter(value => l2.includes(value));
    return filteredArray;
  }

</script>


  <script src="./assets/bootstrap.bundle.min.js"></script>
  <script src="./assets/prism.js" data-manual=""></script>
  <script src="./assets/custom.js"></script>
</body>
</html>